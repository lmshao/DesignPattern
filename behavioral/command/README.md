# 命令模式（Command Pattern）

## 设计逻辑说明

本示例通过命令模式实现了一个智能灯泡遥控器系统，展示了如何将请求封装为对象，从而实现请求的参数化、撤销等功能。命令模式将"做什么"与"谁来做"、"何时做"完全分离。

- **Command（命令接口）**：`Command` trait，定义了命令的统一接口，包含 `execute()`（执行）和 `undo()`（撤销）方法。
- **ConcreteCommand（具体命令）**：
  - `TurnOnCommand`（开灯命令）：封装开灯操作，撤销时执行关灯
  - `TurnOffCommand`（关灯命令）：封装关灯操作，撤销时执行开灯
- **Receiver（接收者）**：`Light` 结构体，负责执行实际的开灯、关灯操作，维护灯泡状态。
- **Invoker（调用者）**：`RemoteControl` 结构体，管理命令的执行和撤销，不需要了解具体的灯泡操作细节。

## 运行效果

程序演示了智能遥控器的两种主要场景：
1. **正常操作流程**：按开灯按钮 → 按关灯按钮，显示灯泡状态变化
2. **撤销功能测试**：连续按撤销按钮，验证命令的可撤销性和边界处理

每次操作都会显示当前灯泡状态（开/关、亮度），清晰展示命令执行的效果。撤销操作会恢复到执行命令前的状态，当没有可撤销的命令时会显示相应提示。

## 适用场景

命令模式适用于需要将请求封装为对象的场景，特别是需要支持撤销、重做、日志记录的应用。例如：
- 智能家居控制：遥控器控制各种家电设备
- 图形界面应用：按钮点击、菜单选择等用户操作
- 文本编辑器：插入、删除、格式化等编辑操作
- 数据库事务：封装SQL操作，支持回滚
- 任务调度系统：将任务封装为命令对象进行排队执行
- 宏操作：将多个命令组合成复合操作 